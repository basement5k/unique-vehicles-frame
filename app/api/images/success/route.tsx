import { NextRequest } from 'next/server';\nimport { ImageResponse } from 'next/og';\nimport { getSessionData } from '@/lib/utils';\n\nexport const runtime = 'edge';\n\nexport async function GET(req: NextRequest) {\n  try {\n    const searchParams = req.nextUrl.searchParams;\n    const sessionId = searchParams.get('sessionId');\n    const channelName = process.env.CHANNEL_NAME || 'unique-vehicles';\n\n    let vehicleType = 'vehicle';\n    let location = 'location';\n\n    if (sessionId) {\n      const sessionData = await getSessionData(sessionId);\n      if (sessionData?.vehicleDetails) {\n        vehicleType = sessionData.vehicleDetails.vehicleType || vehicleType;\n        location = sessionData.vehicleDetails.location || location;\n      }\n    }\n\n    return new ImageResponse(\n      (\n        <div\n          style={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n            justifyContent: 'center',\n            width: '100%',\n            height: '100%',\n            background: 'linear-gradient(to bottom, #f0f9ff, #e6f7ff)',\n            padding: 40,\n          }}\n        >\n          <div\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              justifyContent: 'center',\n              width: '100%',\n              maxWidth: '800px',\n            }}\n          >\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                backgroundColor: '#52c41a',\n                color: 'white',\n                width: '100%',\n                padding: '20px 0',\n                fontSize: 32,\n                fontWeight: 'bold',\n                borderRadius: '12px 12px 0 0',\n              }}\n            >\n              Successfully Shared!\n            </div>\n\n            <div\n              style={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                width: '100%',\n                padding: '40px',\n                backgroundColor: 'white',\n                borderRadius: '0 0 12px 12px',\n                border: '1px solid #d9f7be',\n                borderTop: 'none',\n              }}\n            >\n              <div style={{ fontSize: 100, marginBottom: 30 }}>ðŸŽ‰</div>\n              <div\n                style={{\n                  fontSize: 24,\n                  fontWeight: 'bold',\n                  marginBottom: 20,\n                  textAlign: 'center',\n                  color: '#333',\n                }}\n              >\n                Your {vehicleType} sighting has been shared\n              </div>\n              <div\n                style={{\n                  fontSize: 18,\n                  textAlign: 'center',\n                  color: '#666',\n                  maxWidth: '80%',\n                  lineHeight: 1.5,\n                }}\n              >\n                Thanks for contributing to the {channelName} channel! Your unique {vehicleType} spotted in {location} has been shared with the community.\n              </div>\n              \n              <div\n                style={{\n                  marginTop: 30,\n                  padding: '15px 25px',\n                  backgroundColor: '#f6ffed',\n                  borderRadius: 8,\n                  fontSize: 16,\n                  color: '#389e0d',\n                  border: '1px solid #b7eb8f',\n                  width: '80%',\n                  textAlign: 'center',\n                }}\n              >\n                Visit the channel to see your post and other unique vehicles!\n              </div>\n            </div>\n          </div>\n\n          <div\n            style={{\n              position: 'absolute',\n              bottom: 20,\n              fontSize: 14,\n              color: '#666',\n            }}\n          >\n            Powered by Farcaster Frames\n          </div>\n        </div>\n      ),\n      {\n        width: 1200,\n        height: 630,\n      }\n    );\n  } catch (error) {\n    console.error('Error generating success image:', error);\n    return new Response('Error generating success image', { status: 500 });\n  }\n}